CREATE DATABASE quanlycungcapthucpham;
USE quanlycungcapthucpham;

CREATE TABLE KHACHHANG (
    MaKH INT PRIMARY KEY AUTO_INCREMENT,
    TenNhaHang VARCHAR(100),
    NguoiDaiDien VARCHAR(100),
    DiaChi VARCHAR(255),
    SDT VARCHAR(20),
    Email VARCHAR(100)
);

CREATE TABLE MAT_HANG (
    MaMH INT PRIMARY KEY AUTO_INCREMENT,
    TenMH VARCHAR(100),
    MoTa TEXT,
    DonViTinh VARCHAR(50),
    GiaBan DECIMAL(10,2)
);

CREATE TABLE NHA_CUNG_CAP (
    MaNCC INT PRIMARY KEY AUTO_INCREMENT,
    TenNCC VARCHAR(100),
    DiaChi VARCHAR(255),
    SDT VARCHAR(20)
);

CREATE TABLE NHAP_KHO (
    MaNhap INT PRIMARY KEY AUTO_INCREMENT,
    MaMH INT,
    MaNCC INT,
    NgayNhap DATE,
    SoLuong INT,
    HanSuDung DATE,
    FOREIGN KEY (MaMH) REFERENCES MAT_HANG(MaMH),
    FOREIGN KEY (MaNCC) REFERENCES NHA_CUNG_CAP(MaNCC)
);

CREATE TABLE TON_KHO (
    MaMH INT PRIMARY KEY,
    SoLuongTon INT,
    HanSuDungGanNhat DATE,
    FOREIGN KEY (MaMH) REFERENCES MAT_HANG(MaMH)
);

CREATE TABLE HOP_DONG (
    MaHD INT PRIMARY KEY AUTO_INCREMENT,
    MaKH INT,
    MaMH INT,
    NgayBatDau DATE,
    NgayKetThuc DATE,
    DiaChiGiao VARCHAR(255),
    FOREIGN KEY (MaKH) REFERENCES KHACHHANG(MaKH),
    FOREIGN KEY (MaMH) REFERENCES MAT_HANG(MaMH)
);

CREATE TABLE LICH_GIAO_HANG (
    MaLich INT PRIMARY KEY AUTO_INCREMENT,
    MaHD INT,
    ThuTrongTuan VARCHAR(20),
    GioGiao TIME,
    ChuKy VARCHAR(100),
    FOREIGN KEY (MaHD) REFERENCES HOP_DONG(MaHD)
);

CREATE TABLE NHANVIEN_GIAO_HANG (
    MaNV INT PRIMARY KEY AUTO_INCREMENT,
    HoTen VARCHAR(100),
    SDT VARCHAR(20)
);

CREATE TABLE XUAT_KHO (
    MaXuat INT PRIMARY KEY AUTO_INCREMENT,
    MaHD INT,
    NgayXuat DATE,
    SoLuong INT,
    MaNV INT,
    FOREIGN KEY (MaHD) REFERENCES HOP_DONG(MaHD),
    FOREIGN KEY (MaNV) REFERENCES NHANVIEN_GIAO_HANG(MaNV)
);

CREATE TABLE THANH_TOAN (
    MaTT INT PRIMARY KEY AUTO_INCREMENT,
    MaHD INT,
    TongTien DECIMAL(12,2),
    TinhTrang VARCHAR(50),
    HinhThuc VARCHAR(50),
    FOREIGN KEY (MaHD) REFERENCES HOP_DONG(MaHD)
);